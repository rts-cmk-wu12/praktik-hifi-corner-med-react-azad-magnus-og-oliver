import{j as e,a as h,r as l,F as u}from"./index-Co0-gr8W.js";import{S as m}from"./searchnav-DNsw4DFJ.js";const p="https://render-db-server.onrender.com/",x=({SortBy:s,ItemPerPage:r,SetSortBy:c,SetItemPerPage:i})=>e.jsxs("div",{className:"filters-under-headline",children:[e.jsx("div",{children:e.jsxs("p",{className:"filters-under-headline__text",children:["sort by:",e.jsxs("select",{name:"sort",id:"sort-select",value:s,onChange:o=>c(o.target.value),children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"Price",children:"Price"}),e.jsx("option",{value:"Name",children:"Name"})]})]})}),e.jsx("div",{children:e.jsxs("p",{className:"filters-under-headline__text",children:["show:",e.jsxs("select",{name:"sort",id:"sort-select",value:r,onChange:o=>i(Number(o.target.value)),children:[e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"12",children:"12"}),e.jsx("option",{value:"24",children:"24"}),e.jsx("option",{value:"100",children:"All"})]})]})})]}),j=({product:s,addToCart:r})=>e.jsxs("div",{className:"shopProductCard__details",children:[e.jsx(h,{to:`/product/${s.id}`,children:e.jsx("img",{className:"shopProductCard__image",src:"/"+s.imageSrc,alt:s.category})}),e.jsx("h2",{className:"shopProductCard__title",children:s.title}),s.discountedPrice?e.jsxs("div",{className:"shopProductCard__discount",children:[e.jsxs("p",{className:"shopProductCard__discount-originalPrice",children:["£",s.price]}),e.jsxs("p",{className:"shopProductCard__discount-discountedPrice",children:["£",s.discountedPrice]})]}):e.jsxs("p",{className:"shopProductCard__originalPrice",children:["£",s.price]}),e.jsx("button",{className:"shopProductCard__add",onClick:()=>r(s),children:"Add to Cart"})]}),P=({products:s,itemsPerPage:r,addToCart:c})=>e.jsx("div",{className:"shopProductCard",children:s.slice(0,r).length>0?s.slice(0,r).map(i=>e.jsx(j,{product:i,addToCart:c},i.id)):e.jsx("p",{children:"No products found."})}),f=()=>e.jsx("div",{className:"text-top-left",children:e.jsx("p",{children:"Home / Amplifiers"})}),g=({onSearch:s})=>{const[r,c]=l.useState({products:[],filteredProducts:[],sortBy:"All",itemsPerPage:100});l.useEffect(()=>{async function a(){try{const n=await(await fetch(p+"products")).json();c(d=>({...d,products:n,filteredProducts:n}))}catch(t){console.error("Error fetching products:",t)}}a()},[]),l.useEffect(()=>{let a=r.products;s&&(a=r.products.filter(t=>t.title.toLowerCase().includes(s.toLowerCase()))),c(t=>({...t,filteredProducts:a}))},[s,r.products]);const i=(a,t)=>r.sortBy==="Price"?a.price-t.price:r.sortBy==="Name"?a.title.localeCompare(t.title):0,o=a=>{const t=JSON.parse(localStorage.getItem("cart"))||[];localStorage.setItem("cart",JSON.stringify([...t,a]))};return e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs("div",{className:"main-shop",children:[e.jsx("h1",{className:"healine-in-shop-category",children:"Amplifiers"}),e.jsx(x,{SortBy:r.sortBy,ItemPerPage:r.itemsPerPage,SetSortBy:a=>c(t=>({...t,sortBy:a})),SetItemPerPage:a=>c(t=>({...t,itemsPerPage:a}))}),e.jsx(P,{products:r.filteredProducts.sort(i),itemsPerPage:r.itemsPerPage,addToCart:o})]})]})},C=()=>{const[s,r]=l.useState("");return e.jsxs(e.Fragment,{children:[e.jsx(m,{onSearch:r}),e.jsx("div",{children:e.jsx(g,{onSearch:s})}),e.jsx(u,{})]})};export{C as default};
